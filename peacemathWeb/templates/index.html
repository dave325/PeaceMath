<!DOCTYPE html>
<html>

<head>
	<title>Peace Math</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
		integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

	{% load staticfiles %}

	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"
		integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>


	<style>
		#sidebar {
			/*background: red;*/
			position: absolute;
			top: 0;
			min-height: 700px;
			width: 500px;
			/* 0 width - change this with JavaScript */
			z-index: 1;
			/* Stay on top */
			margin-top: 50px;
			text-align: cener;

		}

		#toggleMenu {
			text-align: center;
		}


		html {
			overflow-x: hidden;
		}

		/*
		   by default have menu hidden (pushed left)
		*/
		.menu-left-hide {
			left: -240px;
			opacity: 0.7;
		}

		/*
		  on toggle, push the menu to the right and open it
		*/
		.menu-left-open {
			left: 0;
			opacity: 1;
		}

		/*

			when the left menu is moved, also move the main content right
		*/
		#main {
			/*
			overflow-x: hidden;
			position: relative;
			left: 0px;
			*/
		}


		.main-push-right {
			left: 240px !important;
		}

		#b {
			width: 800px !important;
			display: block;
			margin-left: auto;
			margin-right: auto;
			margin-top: -75px;

		}

		.menu-left-hide,
		.menu-left-open {
			-webkit-transition: 200ms ease-in-out;
			transition: 200ms ease-in-out;
		}
	</style>


</head>

<body>



	<div id="sidebar" class="menu-left-hide">


		<div class="row">

			<div class="col-6">


				<div>
					Input Value: {{ initialParamValue }}
				</div>
				<form id="initialParamValue" method="post" action="/physics/sendInitialParameterValue/?id={{uuid}}">
					{% csrf_token %}
	
					<select name="initialParamValue" form="initialParamValue" id="mySelect">
						{% for option in select_options %}
						<option value="{{option}}" {% if option == initialParamValue %}selected="selected" {% endif %}>
							{{option}}
						</option>
						{% endfor %}
					</select>
	
					<input type="submit" class="btn btn-light btn-outline-info">
				</form>
	
	
				<hr>
				<button name="calculate" class="btn btn-light btn-outline-info" id="btn_calculate">Calculate</button>
				<div class="input-menu">
					{% csrf_token %}
	
	
					{% for label in inputFields %}
	
					<label for={{label}}>{{label}}</label>
					<input class="form-control b_values" type="number" placeholder="1.0" min="0" max="100" step="0.1"
						name={{label}} id={{label}}>
	
					{% endfor %}
	
	
					<hr>
					<div>
						Initial Conditions
					</div>
					<div class="submit_buttons">
						<input class="btn btn-light btn-outline-info" type="submit" value="Original" name="original"
							id="btn_original" />
						<input class="btn btn-light btn-outline-info" type="submit" value="Enter" name="enter"
							id="btn_enter" />
					</div>
				</div>

			</div>

			<div class="col-6">
				<button class="btn btn-large btn-primary" id="toggleMenu">Modify</button>

			</div>


		</div>
	</div>



	<div id="main">


		<div id="b">
			{{box_graph | safe}}
		</div>

	</div>





	<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
		integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
		crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
		integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
		crossorigin="anonymous"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
		integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
		crossorigin="anonymous"></script>
	<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
	<script id="lzutf8" src="https://cdn.jsdelivr.net/npm/lzutf8/build/production/lzutf8.js"></script>
</body>

<!-- ASYNC SCRIPT LOADERS -->
<script type="text/javascript" async src="{% static 'index.js' %}"></script>

<script type="text/javascript">


	function hideMenu() {
		$('#sidebar').removeClass('menu-left-open');
		sidebarOpen = false;
	};

	function showMenu() {
		$('#sidebar').addClass('menu-left-open');
		sidebarOpen = true;
	};

	var sidebarOpen = false;

	$('#toggleMenu').click(function () {

		if (!sidebarOpen) {
			showMenu();
			sidebarOpen = true;
		}
		else {
			hideMenu();
			sidebarOpen = false;
		}
	});



	//console.log({{dataValues | safe}})
	window.sessionStorage.setItem("key", "{{session_key}}")
	console.log("Adding text listeners")

	let text = document.getElementsByClassName("mpld3-text");
	for (let j = 0; j < text.length; j++) {
		console.log(text[j])
		text[j].addEventListener('click', () => {
			data = JSON.stringify({ key: window.sessionStorage.getItem("key"), val: j })
			fetch('/physics/btn_click/', {
				method: 'post', headers: {
					'Accept': 'application/json',
					'Content-Type': 'application/json'
				}, body: data
			}).then((res) => {
				res.json().then(

					(i) => {
						console.log(i)
					}
				)
			})
		});
	}








</script>




</html>